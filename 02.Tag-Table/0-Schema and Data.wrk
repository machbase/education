{"data":[{"id":"1721276749304935","contents":"# 기본 태그 테이블 샘플","height":88,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1721276747425279","contents":"\ndrop table basic;       -- 테이블 삭제\nCREATE TAG TABLE basic ( name varchar(32) primary key, time datetime basetime, value double summarized); -- 테이블 생성\n\ninsert into basic metadata values('pre-tag');   -- 태그명 수동 입력 (현재는 데이터를 입력하면 자동으로 입력됨)\n\n-- 데이터 입력 예시\ninsert into basic values('vib1', '2000-01-01 12:00:00', 0);     \ninsert into basic values('vib1', '2000-01-01 12:30:00', 10);\ninsert into basic values('vib1', '2000-01-01 13:00:00', 20);\ninsert into basic values('vib1', '2000-01-01 13:30:00', 30);\ninsert into basic values('vib1', '2000-01-01 14:00:00', 40);\ninsert into basic values('vib1', '2000-01-01 14:30:00', 50);\ninsert into basic values('vib1', '2000-01-01 15:00:00', 60);\n\n-- 태그 메타 조회\nselect * from _basic_meta;\n\nselect * from basic;        -- Raw 데이터 조회\nselect * from basic where name = 'vib1' and time between '2000-01-01 00:00:00' and '2000-01-01 13:10:00';   -- 태그명 과 시간 조건을 이용한 Raw 데이터 조회\nselect * from basic where name = 'vib1' and time > '2000-01-01 14:00:00';                                   \n\ndelete from basic BEFORE '2000-01-01 13:00:00';   -- 조회 시간 조건의 이전 데이터 삭제\nselect * from basic;        -- 삭제 후 Raw 데이터 확인","height":473,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":false},{"id":"1692668071296413","contents":"# 추가 메타 컬럼을 가진 태그 테이블 생성","height":87,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1692668115183775","contents":"\ndrop table mytag;\nCREATE TAG TABLE MYTAG ( name varchar(32) primary key, time datetime basetime, value double summarized)\n                       METADATA( factory varchar(32), equipment varchar(64) );  -- meta컬럼이 추가된 형태의 테이블 생성\n\ninsert into mytag values('vib1', now, 0, 'seoul', 'drilling');  -- 데이터 입력\n\ninsert into mytag (name, time, value) values('vib2', now, 1);   -- 추가 메타를 제외하고 데이터 입력\n\ninsert into mytag (name, time, value) values('vib3', now, 3);   -- 추가 메타를 제외하고 데이터 입력\n\nselect * from mytag;                                            -- 입력된 데이터 확인\n\nselect * from _mytag_meta;                                      -- 메타 테이블 확인\n\nupdate mytag metadata set factory = 'daegu', equipment = 'bench' where name = 'vib2';   -- 추가 컬럼 업데이트\n\nselect * from _mytag_meta;                                              -- 업데이트 확인\n\nalter table _mytag_meta add column(line varchar(16) default 'op01');    -- 메타 컬럼 추가\n\nselect * from _mytag_meta;                                              -- 추가 컬럼 확인\n\nupdate mytag metadata set line = 'op03' where name = 'vib3';            -- 메타 컬럼의 데이터 업데이트\n\nselect * from _mytag_meta;                              -- 업데이트 내용 확인\n\ndelete from mytag metadata where name = 'vib1';         -- 특정 태그 네임을 조건으로 메타데이터 삭제\n\ndelete from mytag where name = 'vib1';                  -- 특정 태그 네임을 조건으로 raw 데이터 삭제\nselect * from mytag;\nselect * from _mytag_meta;\ndelete from mytag metadata where name = 'vib1';         -- raw 데이터 삭제 후 메타데이터 삭제\nselect * from _mytag_meta;\n","height":734,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":false},{"id":"1721197512046946","contents":"# 확장 컬럼이 추가된 태그 테이블 생성","height":112,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1721197552124601","contents":"drop table mytag2;\nCREATE TAG TABLE mytag2 ( name varchar(32) primary key, time datetime basetime, value double summarized,\n                          quality integer,  strval varchar(64) );           -- 추가 컬럼을 포함한 테이블 생성 예시\n\ninsert into mytag2 values('vib1', now, 0, 99, 'drilling');                  -- 데이터 입력\ninsert into mytag2 (name, time, value) values('vib2', now, 1);              -- 추가 컬럼을 제외하고 데이터 입력\ninsert into mytag2 values('vib3', now, 3.12, 89, \"my vibration string\");    \ninsert into mytag2 values('vib1', now, 0, 97, 'drilling2');\n\nselect * from mytag2;                                                       -- 입력된 데이터 확인\nselect * from _mytag2_meta;                                                 -- 태그 메타데이터 확인\n\ndelete from mytag2 where quality = 97;                                      -- 특정 컬럼의 값을 조건으로 데이터 삭제 (오류 발생)\n\ndelete from mytag2 where name = 'vib1';                                     -- 특정 태그명을 조건으로 데이터 삭제\nselect * from mytag2;\nselect * from _mytag2_meta;\ndelete from mytag2 metadata where name = 'vib1';                            -- 특정 태그명을 태그 메타에서 삭제\nselect * from _mytag2_meta;                                                 -- 삭제 후 확인","height":399,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":false},{"id":"1758625514695671","contents":"# 종합 SELECT샘플 ","height":46,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1758625366609531","contents":"---------------------------------- SCHEMA ----------------------------------\r\ndrop table basic;\r\nCREATE TAG TABLE basic ( name varchar(32) primary key, time datetime basetime, value double summarized)\r\n    METADATA( factory varchar(32), equipment varchar(64) ) tag_partition_count=1;\r\n\r\n---------------------------------- INSERT ----------------------------------\r\n-- insert meta\r\ninsert into basic metadata values('tag-1', 'seoul', 'chill');\r\ninsert into basic metadata values('tag-2', 'seoul', 'pressure');\r\ninsert into basic metadata values('tag-3', 'taegu', 'chill'); -- no data\r\nselect * from _basic_meta;\r\n\r\n-- insert meta + data\r\ninsert into basic values('tag-4', '2022-01-01 11:11:11', 99, 'daegu', 'pressure');\r\ninsert into basic (name, time, value) values('tag-1', '2022-01-01 11:11:11', 88);\r\ninsert into basic (name, time, value) values('tag-2', '2022-01-01 11:11:11', 77);\r\n\r\nselect * from _basic_meta;\r\nselect * from basic;\r\n\r\n---------------------------------- SELECT ----------------------------------\r\n-- select with meta only \r\nselect * from basic where factory = 'seoul';\r\nselect * from basic where equipment = 'chill';\r\nselect * from basic where equipment = 'pressure';\r\nselect * from basic where name = 'tag-1';\r\nselect * from basic where factory = 'seoul' and equipment = 'pressure';\r\n\r\n-- with meta + time\r\nselect * from basic where factory = 'seoul' and equipment = 'chill'  and time between '2022-01-01' and '2022-12-31';\r\n\r\n-- with meta + tagname + time\r\nselect * from basic where factory = 'seoul' and equipment = 'chill' and name in ('tag-1') and \r\n              time between '2022-01-01' and '2022-12-31';\r\n\r\n---------------------------------- UPDATE ----------------------------------\r\n-- update meta \r\nupdate basic metadata set equipment = 'chill2' where name = 'tag-1';\r\n\r\n-- error without tagname\r\nupdate basic metadata set equipment = 'chill2';\r\n\r\nselect * from _basic_meta;\r\n","height":838,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true}]}