{"data":[{"id":"1716522067197825","contents":"# 통계 데이터를 빠르게 조회 가능한 롤업 예시","height":76,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1716517848972940","contents":"drop table machroll cascade;\n\ncreate tag table if not exists machroll ( name varchar(20) primary key, time datetime basetime,value double summarized) \nwith rollup(min) extension tag_partition_count=1;","height":91,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1716522185313632","contents":"# 2022-07-01 부터 2024-06-30 까지의 데이터 로딩\r\n- 로딩 시간이 수분 소요될 수 있으므로 인내심을 가지고 기다리자!","height":57,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1716522111286193","contents":"FAKE( oscillator( freq(1/60/60/24/183, 300), \n                  range(parseTime(\"2022-07-01 00:00:00\", \"DEFAULT\", tz(\"KST\")), \n                        \"731d\", \n                        \"10s\") \n                )\n    )\nPUSHVALUE(0, 'pneumatic', 'name')\nAPPEND(table('machroll'))","height":174,"lineHeight":19,"minimal":false,"type":"tql","tqlType":"text","lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"171764288356063","contents":"# 롤업을 강제로 생성하기\r\n- 시간당 롤업 생성을 위해서 한번 수행한다.","height":51,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1717642914620217","contents":"exec rollup_force(_machroll_rollup_hour);","height":57,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1717642962162211","contents":"# 현재 롤업 생성 현황을 확인\r\n- SHELL에서 'show rollupgap' 명령을 수행\r\n- GAP이 0이면 지연이 없는 상태임","height":113,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1716522977367268","contents":"예시)\r\n```\r\nsys machbase-neo» show rollupgap;\r\n┌────────┬──────────────────────┬───────────────────────┬─────────────┬────────────────┬─────┬───────────┐\r\n│ ROWNUM │ SRC_TABLE            │ ROLLUP_TABLE          │ SRC_END_RID │ ROLLUP_END_RID │ GAP │ LAST_TIME │\r\n├────────┼──────────────────────┼───────────────────────┼─────────────┼────────────────┼─────┼───────────┤\r\n│      1 │ _MACHROLL_DATA_0     │ _MACHROLL_ROLLUP_MIN  │ 6315840     │ 6315840        │ 0   │ 16        │\r\n│      2 │ _MACHROLL_ROLLUP_MIN │ _MACHROLL_ROLLUP_HOUR │ 1053061     │ 1053061        │ 0   │ 11        │\r\n└────────┴──────────────────────┴───────────────────────┴─────────────┴────────────────┴─────┴───────────┘\r\n2 rows fetched.\r\n```","height":222,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1724029472345869","contents":"show rollupgap;","height":51,"lineHeight":19,"minimal":false,"type":"shell","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1717643251207219","contents":"# 데이터의 시간 범위","height":35,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"171652261414266","contents":"select name, to_char(min_time), to_char(max_time) from v$machroll_stat;","height":36,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":false},{"id":"171764334019317","contents":"# 데이터의 건수","height":56,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1717643269971141","contents":"select count(*) from machroll;","height":35,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1717643371171532","contents":"# Raw 데이터를 과거부터 10건 조회","height":36,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1717643283130289","contents":"select name, to_char(time), value from machroll limit 10;","height":44,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":false},{"id":"1717643467679124","contents":"# 최근 Raw 데이터 10건 조회","height":63,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1717643281437352","contents":"select /*+ SCAN_BACKWARD(machroll) */ name, to_char(time), value from machroll limit 10;","height":49,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":false}]}