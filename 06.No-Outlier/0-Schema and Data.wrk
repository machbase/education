{"data":[{"id":"1689062366028419","contents":"Remove outliers \n======\nIntroduction to LSL/USL\n------\nLSL(Lower Specification Limit) denotes the lower specification limit, while USL(Upper Specification Limit) signifies the upper specification limit.\n\nIn Machbase, the LSL/USL feature is supported only in the tag metadata table that is dependent on the tag table.\n\nThe LSL/USL feature sets upper and lower specification limits for a specific TAG ID, serving as a protective measure against unexpected data inputs.\n\nConstraints\n------\nThere are several constraints for the LSL/USL setting.\n\n- The CLUSTER EDITION doesn’t support LSL/USL feature.\n- To set LSL/USL, the third column named Value in the tag table must be set to SUMMARIZED.\n- LSL should be less than or equal to USL, and the input value for the Value column is between LSL and USL, inclusive. (LSL <= Value <= USL)\n- Data entered before granting the LSL/USL settings is not validated.\n- Setting the LSL/USL column to NULL does not validate the input data.\n- LSL/USL features can be used separately. you can just set the USL if you only want to match the upper specification.\n- If only the USL feature is used, data lower than the USL is not validated.\n\nSetting and Using LSL/USL\n------\nTo use the LSL/USL feature, you need to set certain keywords in the columns of the tag metadata table.\n\n- For LSL, use the LOWER LIMIT keyword.\n- For USL, use the UPPER LIMIT keyword.\n\nYou can set these when creating the tag table or when adding a metadata column. Here are some examples.\n\nCRAETE","height":200,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1692694238727935","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   INTEGER     SUMMARIZED)\r\nMETADATA (\r\n    lsl     INTEGER LOWER LIMIT,\r\n    usl     INTEGER UPPER LIMIT \r\n);","height":179,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1692694258307116","contents":"You can use both columns together, but you can also use just one if you want.\r\n\r\nIf you set only the LSL, data higher than the LSL is not validated. It’s like setting USL == NULL.","height":89,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1692694264148577","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   INTEGER     SUMMARIZED)\r\nMETADATA (\r\n    lsl    INTEGER LOWER LIMIT  \r\n);","height":154,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1720760168084450","contents":"ADD COLUMN\r\n------\r\nIf you add using ADD COLUMN after data is already entered, the default value is NULL.","height":165,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1692694340370313","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   INTEGER     SUMMARIZED\r\n);\r\n\r\nALTER TABLE _out_tag_meta ADD COLUMN (lsl INTEGER LOWER LIMIT);\r\nALTER TABLE _out_tag_meta ADD COLUMN (usl INTEGER UPPER LIMIT);","height":174,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1692694380748540","contents":"You can also add just one attribute as with CREATE.","height":200,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1692694422435115","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   INTEGER     SUMMARIZED\r\n);\r\n\r\nALTER TABLE _out_tag_meta ADD COLUMN (lsl INTEGER LOWER LIMIT);","height":222,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1720761101327566","contents":"INSERT\r\n------\r\nOnce the LSL/USL feature is set up and the LSL/USL for a specific TAG ID is set, you are ready to input data.","height":200,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1692694445980160","contents":"INSERT INTO out_tag metadata VALUES ('TAG_01', 100, 200); -- 1st error. only lsl(lower) column.\r\n\r\nALTER TABLE _out_tag_meta ADD COLUMN (usl INTEGER UPPER LIMIT); -- add usl(upper) column.\r\n\r\nINSERT INTO out_tag metadata VALUES ('TAG_01', 100, 200); -- 2nd no error.","height":120,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1720761157492207","contents":"After setting it up, when entering tag data, it will operate as follows.","height":200,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1692694472931400","contents":"INSERT INTO out_tag VALUES ('TAG_01', NOW, 95);  --Failure\r\n--[ERR-02342: SUMMARIZED value is less than LOWER LIMIT.]\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 100); --Success (Inclusive)\r\n--1 row(s) inserted.\r\n--Elapsed time: 0.000\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 150); --Success\r\n--1 row(s) inserted.\r\n--Elapsed time: 0.000\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 200); --Success (Inclusive)\r\n--1 row(s) inserted.\r\n--Elapsed time: 0.000\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 205); --Failure [ERR-02341: SUMMARIZED value is greater than UPPER LIMIT.]","height":339,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1720680521090987","contents":"When you view the tag table after entering the values, you can confirm that only the verified data has been entered.","height":200,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1720680545726482","contents":"SELECT * FROM out_tag;","height":56,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1720681811893187","contents":"UPDATE\r\n------\r\nYou can modify the values of the LSL/USL columns set in the tag meta table.\r\n\r\nSince it doesn’t verify the data already entered into the tag data table, use it with caution.","height":96,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"1720681641072873","contents":"UPDATE out_tag metadata SET lsl = 10, usl = 100 WHERE tag_id = 'TAG_01';\r\n\r\nSELECT * FROM _out_tag__meta;","height":103,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1720680634102371","contents":"DELETE\r\n------\r\nThe tag meta table does not support the DROP COLUMN feature, so there is no direct way to delete only the LSL/USL columns.\r\n\r\nAlthough you can’t delete columns, if you set the LSL/USL column values to NULL, you can input data without any constraints.","height":95,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true},{"id":"172068070986164","contents":"UPDATE out_tag metadata SET lsl = NULL, usl = NULL WHERE tag_id = 'TAG_01';\r\n\r\nSELECT * FROM _out_tag_meta;","height":80,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true}]}