{"data":[{"id":"1689062366028419","contents":"이상치 제거\n======\nLSL/USL 소개\n------\nLSL(Lower Spec Limit)은 규격 하한을 나타내고, USL(Upper Spec Limit)은 규격 상한을 의미함\n\n마크베이스에서 제공하는 LSL/USL 기능은 태그테이블에 종속된 태그 메타데이터 테이블을 통해서만 지원됨\n\nLSL/USL 기능은 특정 TAG ID에 대한 사양 상한 및 하한을 설정하여 예상치 못한 데이터 입력에 대한 보호 조치 역할을 함","height":188,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1692694238727935","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   DOUBLE     SUMMARIZED) \r\nMETADATA (\r\n    lsl     DOUBLE LOWER LIMIT,\r\n    usl     DOUBLE UPPER LIMIT \r\n) TAG_PARTITION_COUNT=1;","height":213,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1692694258307116","contents":"두 개의 컬럼을 같이 사용할 수도 있지만 원한다면 LSL/USL 둘 중 하나만을 사용할 수도 있음\r\n\r\nLSL 하나만 설정할 경우 LSL보다 큰 데이터에 대해서는 검증하지 않음. 즉 USL == NULL 과 같음","height":89,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1692694264148577","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   DOUBLE     SUMMARIZED) \r\nMETADATA (\r\n    lsl    DOUBLE LOWER LIMIT  \r\n) TAG_PARTITION_COUNT=1;","height":201,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1720760168084450","contents":"ADD COLUMN\r\n------\r\nADD COLUMN 을 이용하여 추가할 경우 기본 값은 NULL","height":76,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1692694340370313","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   DOUBLE     SUMMARIZED\r\n) TAG_PARTITION_COUNT=1;\r\n\r\nALTER TABLE _out_tag_meta ADD COLUMN (lsl DOUBLE LOWER LIMIT);\r\nALTER TABLE _out_tag_meta ADD COLUMN (usl DOUBLE UPPER LIMIT);","height":225,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1692694380748540","contents":"CREATE에서 처럼 하나의 속성만 추가하는 것도 가능함","height":57,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1692694422435115","contents":"DROP TABLE out_tag;\r\n\r\nCREATE TAG TABLE out_tag (\r\n    tag_id  VARCHAR(50) PRIMARY KEY,\r\n    time    DATETIME    BASETIME,\r\n    value   DOUBLE     SUMMARIZED\r\n) TAG_PARTITION_COUNT=1;\r\n\r\nALTER TABLE _out_tag_meta ADD COLUMN (lsl DOUBLE LOWER LIMIT);","height":206,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1720761101327566","contents":"INSERT\r\n------\r\nLSL/USL 기능을 설정하고 특정 TAG ID에 대해 LSL/USL을 설정하면 데이터 입력 준비가 완료됨","height":85,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1692694445980160","contents":"INSERT INTO out_tag metadata VALUES ('TAG_01', 100.0, 200.0); -- 1st error. only lsl(lower) column.\r\n\r\nALTER TABLE _out_tag_meta ADD COLUMN (usl DOUBLE UPPER LIMIT); -- add usl(upper) column.\r\n\r\nINSERT INTO out_tag metadata VALUES ('TAG_01', 100.0, 200.0); -- 2nd no error.\r\n\r\nselect * from _out_tag_meta;","height":169,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1720761157492207","contents":"이렇게 설정한 뒤 태그 데이터를 입력하면 아래와 같이 동작함","height":48,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1692694472931400","contents":"INSERT INTO out_tag VALUES ('TAG_01', NOW, 95.2);  --Failure [ERR-02342: SUMMARIZED value is less than LOWER LIMIT.]\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 100.0); --Success (Inclusive)\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 150.5); --Success\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 200.0); --Success (Inclusive)\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 205.5); --Failure [ERR-02341: SUMMARIZED value is greater than UPPER LIMIT.]","height":195,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1720680521090987","contents":"값을 입력한 뒤 태그 테이블을 조회해보면 확실하게 검증된 데이터만 입력된 것을 확인 가능함","height":45,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1720680545726482","contents":"SELECT tag_id, to_char(time), value, lsl, usl FROM out_tag;","height":56,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true},{"id":"1720681811893187","contents":"UPDATE\r\n------\r\n태그 메타 테이블에 설정된 LSL/USL 컬럼의 값을 수정 가능함 \r\n\r\n이미 태그 데이터 테이블에 입력된 데이터에 대해서는 검증하지 않기 때문에 주의해서 사용해야함","height":117,"lineHeight":19,"minimal":true,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"1720681641072873","contents":"UPDATE out_tag metadata SET lsl = 10, usl = 100 WHERE tag_id = 'TAG_01';\r\n\r\nSELECT * FROM _out_tag_meta;","height":103,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"]],"result":"","status":true,"brief":true},{"id":"1720680634102371","contents":"Disable\r\n------\r\nSet NULL  in order not to work\r\n","height":118,"lineHeight":19,"minimal":false,"type":"mrk","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true},{"id":"172068070986164","contents":"UPDATE out_tag metadata SET lsl = NULL, usl = NULL WHERE tag_id = 'TAG_01';\r\n\r\nSELECT * FROM _out_tag_meta;\r\n\r\nINSERT INTO out_tag VALUES ('TAG_01', NOW, 205.5); \r\n\r\nSELECT * FROM OUT_TAG;","height":154,"lineHeight":19,"minimal":false,"type":"sql","tqlType":null,"lang":[["markdown","Markdown"],["SQL","SQL"],["go","TQL"],["shell","Shell"]],"result":"","status":true,"brief":true}]}